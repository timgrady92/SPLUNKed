{% extends "_base.html" %}

{% block title %}Investigation Guides - SPLUNKed{% endblock %}

{% block content %}
{% from "_components.html" import search_input, category_tab %}

<div class="page-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1 class="page-title">Investigation Guides</h1>
        <p class="page-subtitle">
            Detection-driven and data-source guides for security investigations.
            Real-world scenarios with practical SPL patterns.
        </p>
    </header>

    <!-- Tabs Navigation -->
    <div class="tabs-container" id="guidesTabs">
        <div class="tabs-list" role="tablist">
            {{ category_tab('detection', 'Detection Guides', active=true) }}
            {{ category_tab('datasource', 'Data Source Guides') }}
        </div>
    </div>

    <!-- Controls Bar -->
    <div class="controls-bar">
        {{ search_input(placeholder='Search guides...', id='guidesSearch') }}

        <div class="filter-dropdown">
            <label for="guidesDifficultyFilter" class="filter-label">Level:</label>
            <select id="guidesDifficultyFilter" class="filter-select">
                <option value="all">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
                <option value="expert">Expert</option>
            </select>
        </div>
    </div>

    <!-- Tab Panels -->
    <div id="detectionPanel" class="tab-panel active" role="tabpanel">
        <div class="guides-grid" id="detectionGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="datasourcePanel" class="tab-panel" role="tabpanel" hidden>
        <div class="guides-grid" id="datasourceGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state hidden" id="guidesEmptyState">
        <div class="empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
            </svg>
        </div>
        <h3 class="empty-title">No guides found</h3>
        <p class="empty-message">Try adjusting your search or filter criteria.</p>
    </div>
</div>

<!-- Guide Modal -->
<div class="guide-modal" id="guideModal">
    <div class="guide-modal-overlay" id="guideModalOverlay"></div>
    <div class="guide-modal-content">
        <div class="guide-modal-header">
            <h2 class="guide-modal-title" id="guideModalTitle"></h2>
            <button class="guide-modal-close" id="guideModalClose" aria-label="Close modal">&times;</button>
        </div>
        <div class="guide-modal-body" id="guideModalBody">
            <!-- Populated by JavaScript -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='guides.js') }}"></script>
{% endblock %}
