{% extends "_base.html" %}

{% block title %}Training - SPLUNKed{% endblock %}

{% block content %}
{% from "_components.html" import search_input, category_tab %}

<div class="page-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1 class="page-title">Training Center</h1>
        <p class="page-subtitle">
            Curated learning pipelines with realistic SOC scenarios.
            Build your analytical instincts through hands-on practice.
        </p>
    </header>

    <!-- Navigation -->
    <div class="training-nav" id="trainingNav">
        <div class="training-nav-groups">
            <button class="training-nav-group" data-level="all">
                <span class="nav-group-icon">&#9783;</span>
                <span class="nav-group-label">View All</span>
            </button>
            <button class="training-nav-group active" data-level="gettingStarted">
                <span class="nav-group-icon">&#9654;</span>
                <span class="nav-group-label">Getting Started</span>
            </button>
            <button class="training-nav-group" data-level="levelingUp">
                <span class="nav-group-icon">&#8593;</span>
                <span class="nav-group-label">Leveling Up</span>
            </button>
            <button class="training-nav-group" data-level="mastery">
                <span class="nav-group-icon">&#9733;</span>
                <span class="nav-group-label">Mastery</span>
            </button>
        </div>
        <div class="training-nav-subs">
            <div class="training-type-filter" id="typeFilter">
                <button class="training-type-btn active" data-filter="all">All Types</button>
                <button class="training-type-btn" data-filter="tutorial">
                    <span class="type-icon">▷</span> Tutorials
                </button>
                <button class="training-type-btn" data-filter="scenario">
                    <span class="type-icon">◎</span> Scenarios
                </button>
                <button class="training-type-btn" data-filter="challenge">
                    <span class="type-icon">★</span> Challenges
                </button>
            </div>
        </div>
    </div>

    <!-- Controls Bar -->
    <div class="controls-bar">
        {{ search_input(placeholder='Search training modules...', id='trainingSearch') }}
    </div>

    <!-- Level Panels -->
    <div id="allPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-grid" id="allGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="gettingStartedPanel" class="tab-panel active" role="tabpanel">
        <div class="training-level-info">
            <span class="level-badge gettingStarted">Getting Started</span>
            <p class="level-description">SPL basics, search anatomy, filtering, aggregating, and field manipulation. Start here if you're new to Splunk.</p>
        </div>
        <div class="training-grid" id="gettingStartedGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="levelingUpPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge levelingUp">Leveling Up</span>
            <p class="level-description">Subsearches, lookups, joins, statistical analysis, and threat hunting patterns. Deepen your investigation skills.</p>
        </div>
        <div class="training-grid" id="levelingUpGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="masteryPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge mastery">Mastery</span>
            <p class="level-description">Performance optimization, complex correlations, Enterprise Security, and expert-level techniques.</p>
        </div>
        <div class="training-grid" id="masteryGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state hidden" id="trainingEmptyState">
        <div class="empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
            </svg>
        </div>
        <h3 class="empty-title">No training modules found</h3>
        <p class="empty-message">Try adjusting your search or filter criteria.</p>
    </div>
</div>

<!-- Training Modal -->
<div class="training-modal" id="trainingModal">
    <div class="training-modal-overlay" id="trainingModalOverlay"></div>
    <div class="training-modal-content">
        <div class="training-modal-header">
            <div class="training-modal-meta">
                <span class="training-type-badge" id="modalTypeBadge"></span>
                <span class="level-badge" id="modalLevelBadge"></span>
                <span class="training-duration" id="modalDuration"></span>
            </div>
            <button class="training-modal-close" id="trainingModalClose" aria-label="Close modal">&times;</button>
        </div>
        <h2 class="training-modal-title" id="trainingModalTitle"></h2>
        <div class="training-modal-objectives" id="trainingModalObjectives">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-body" id="trainingModalBody">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-nav" id="trainingModalNav">
            <!-- Populated by JavaScript for scenarios -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='training.js') }}"></script>
{% endblock %}
