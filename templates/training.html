{% extends "_base.html" %}

{% block title %}Training - SPLUNKed{% endblock %}

{% block content %}
{% from "_components.html" import search_input, category_tab %}

<div class="page-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1 class="page-title">Training Center</h1>
        <p class="page-subtitle">
            Curated learning pipelines with realistic SOC scenarios.
            Build your analytical instincts through hands-on practice.
        </p>
    </header>

    <!-- Skill Progression Tabs -->
    <div class="tabs-container" id="trainingTabs">
        <div class="tabs-list" role="tablist">
            {{ category_tab('foundations', 'Foundations', active=true) }}
            {{ category_tab('coreSkills', 'Core Skills') }}
            {{ category_tab('intermediate', 'Intermediate') }}
            {{ category_tab('advanced', 'Advanced') }}
            {{ category_tab('expert', 'Expert') }}
        </div>
    </div>

    <!-- Controls Bar -->
    <div class="controls-bar">
        {{ search_input(placeholder='Search training modules...', id='trainingSearch') }}
    </div>

    <!-- Filter Groups -->
    <div class="filter-groups">
        <div class="filter-section">
            <span class="filter-section-label">Type</span>
            <div class="icon-filter" id="typeFilter">
                <button class="icon-filter-btn active" data-filter="all">
                    <span>All</span>
                </button>
                <button class="icon-filter-btn" data-filter="tutorial">
                    <span class="filter-icon">▷</span>
                    <span>Tutorials</span>
                </button>
                <button class="icon-filter-btn" data-filter="scenario">
                    <span class="filter-icon">◎</span>
                    <span>Scenarios</span>
                </button>
                <button class="icon-filter-btn" data-filter="challenge">
                    <span class="filter-icon">★</span>
                    <span>Challenges</span>
                </button>
            </div>
        </div>
        <div class="filter-section">
            <span class="filter-section-label">Domain</span>
            <div class="icon-filter" id="domainFilter">
                <button class="icon-filter-btn active" data-filter="all">
                    <span>All</span>
                </button>
                <button class="icon-filter-btn" data-filter="authentication">
                    <span class="filter-icon">⚿</span>
                    <span>Authentication</span>
                </button>
                <button class="icon-filter-btn" data-filter="network">
                    <span class="filter-icon">⬡</span>
                    <span>Network</span>
                </button>
                <button class="icon-filter-btn" data-filter="endpoint">
                    <span class="filter-icon">▣</span>
                    <span>Endpoint</span>
                </button>
                <button class="icon-filter-btn" data-filter="incident-response">
                    <span class="filter-icon">⚠</span>
                    <span>Incident Response</span>
                </button>
                <button class="icon-filter-btn" data-filter="basics">
                    <span class="filter-icon">○</span>
                    <span>Basics</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Tab Panels -->
    <div id="foundationsPanel" class="tab-panel active" role="tabpanel">
        <div class="training-level-info">
            <span class="level-badge foundations">Foundations</span>
            <p class="level-description">SPL basics, search anatomy, time concepts, and field extraction. Start here if you're new to Splunk.</p>
        </div>
        <div class="training-grid" id="foundationsGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="coreSkillsPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge coreSkills">Core Skills</span>
            <p class="level-description">Filtering, aggregating, field manipulation, and basic correlation. Essential skills for daily SOC work.</p>
        </div>
        <div class="training-grid" id="coreSkillsGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="intermediatePanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge intermediate">Intermediate</span>
            <p class="level-description">Subsearches, lookups, joins, and transaction analysis. Combine data sources for deeper investigation.</p>
        </div>
        <div class="training-grid" id="intermediateGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="advancedPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge advanced">Advanced</span>
            <p class="level-description">Statistical analysis, anomaly detection, and threat hunting patterns. Proactive security techniques.</p>
        </div>
        <div class="training-grid" id="advancedGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="expertPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-level-info">
            <span class="level-badge expert">Expert</span>
            <p class="level-description">Performance optimization, complex correlations, and custom commands. Master-level techniques.</p>
        </div>
        <div class="training-grid" id="expertGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state hidden" id="trainingEmptyState">
        <div class="empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="M21 21l-4.35-4.35"/>
            </svg>
        </div>
        <h3 class="empty-title">No training modules found</h3>
        <p class="empty-message">Try adjusting your search or filter criteria.</p>
    </div>
</div>

<!-- Training Modal -->
<div class="training-modal" id="trainingModal">
    <div class="training-modal-overlay" id="trainingModalOverlay"></div>
    <div class="training-modal-content">
        <div class="training-modal-header">
            <div class="training-modal-meta">
                <span class="training-type-badge" id="modalTypeBadge"></span>
                <span class="training-difficulty" id="modalDifficulty"></span>
                <span class="training-duration" id="modalDuration"></span>
            </div>
            <button class="training-modal-close" id="trainingModalClose" aria-label="Close modal">&times;</button>
        </div>
        <h2 class="training-modal-title" id="trainingModalTitle"></h2>
        <div class="training-modal-objectives" id="trainingModalObjectives">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-body" id="trainingModalBody">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-nav" id="trainingModalNav">
            <!-- Populated by JavaScript for scenarios -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='training.js') }}"></script>
{% endblock %}
