{% extends "_base.html" %}

{% block title %}Training - SPLUNKed{% endblock %}

{% block content %}
{% from "_components.html" import search_input, empty_state %}

<div class="page-container">
    <!-- Page Header -->
    <header class="page-header">
        <h1 class="page-title">Training Center</h1>
        <p class="page-subtitle">
            Practical lessons, tutorials, and realistic SOC scenarios.
            Build your analytical instincts through hands-on practice.
        </p>
    </header>

    <!-- Tab Navigation -->
    <div class="training-tabs" id="trainingTabs">
        <button class="training-tab active" data-category="lessons">Lessons</button>
        <button class="training-tab" data-category="scenarios">Scenarios</button>
        <button class="training-tab" data-category="challenges">Challenges</button>
        <button class="training-tab" data-category="pipelines">Learning Paths</button>
    </div>

    <!-- Controls Bar -->
    <div class="controls-bar">
        {{ search_input(placeholder='Search training content...', id='trainingSearch') }}
        <div class="filter-group" id="trainingCategoryFilterWrap">
            <select class="filter-select" id="trainingCategoryFilter" aria-label="Filter training by category">
                <option value="all">All Categories</option>
                <option value="Foundations &amp; Search Literacy">Foundations &amp; Search Literacy</option>
                <option value="Query Craft &amp; Summaries">Query Craft &amp; Summaries</option>
                <option value="Investigation &amp; Detection">Investigation &amp; Detection</option>
                <option value="Data Integration &amp; Enrichment">Data Integration &amp; Enrichment</option>
                <option value="Visualization &amp; Dashboards">Visualization &amp; Dashboards</option>
                <option value="Enterprise Security">Enterprise Security</option>
            </select>
        </div>
        <div class="filter-group" id="pipelineTrackFilterWrap">
            <select class="filter-select" id="pipelineTrackFilter" aria-label="Filter learning paths by track">
                <option value="all">All Tracks</option>
                <option value="Fundamentals">Fundamentals</option>
                <option value="Power User">Power User</option>
                <option value="Administrator">Administrator</option>
                <option value="Architect">Architect</option>
            </select>
        </div>
    </div>

    <!-- Tab Panels -->
    <div id="lessonsPanel" class="tab-panel active" role="tabpanel">
        <div class="lessons-grid" id="lessonsGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="scenariosPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-grid" id="scenariosGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="challengesPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="training-grid" id="challengesGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <div id="pipelinesPanel" class="tab-panel" role="tabpanel" hidden>
        <div class="pipelines-grid" id="pipelinesGrid">
            <!-- Populated by JavaScript -->
        </div>
    </div>

    <!-- Empty State -->
    {{ empty_state(
        title='No content found',
        message='Try adjusting your search criteria.',
        id='trainingEmptyState',
        hidden=true
    ) }}
</div>

<!-- Lesson Modal (for How-To Lessons) -->
<div class="guide-modal" id="guideModal">
    <div class="guide-modal-overlay" id="guideModalOverlay"></div>
    <div class="guide-modal-content">
        <div class="guide-modal-header">
            <div class="guide-modal-meta">
                <span class="guide-modal-badge">ðŸ“– Lesson</span>
            </div>
            <button class="guide-modal-close" id="guideModalClose" aria-label="Close modal">&times;</button>
        </div>
        <h2 class="guide-modal-title" id="guideModalTitle"></h2>
        <div class="guide-modal-body" id="guideModalBody">
            <!-- Populated by JavaScript -->
        </div>
    </div>
</div>

<!-- Training Modal (for tutorials, scenarios, challenges) -->
<div class="training-modal" id="trainingModal">
    <div class="training-modal-overlay" id="trainingModalOverlay"></div>
    <div class="training-modal-content">
        <div class="training-modal-header">
            <div class="training-modal-meta">
                <span class="training-type-badge" id="modalTypeBadge"></span>
                <span class="training-duration" id="modalDuration"></span>
            </div>
            <button class="training-modal-close" id="trainingModalClose" aria-label="Close modal">&times;</button>
        </div>
        <h2 class="training-modal-title" id="trainingModalTitle"></h2>
        <div class="training-modal-objectives" id="trainingModalObjectives">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-body" id="trainingModalBody">
            <!-- Populated by JavaScript -->
        </div>
        <div class="training-modal-nav" id="trainingModalNav">
            <!-- Populated by JavaScript for scenarios -->
        </div>
    </div>
</div>

<!-- Pipeline Detail Modal -->
<div class="pipeline-modal" id="pipelineModal">
    <div class="pipeline-modal-overlay" id="pipelineModalOverlay"></div>
    <div class="pipeline-modal-content">
        <div class="pipeline-modal-header">
            <div class="pipeline-modal-meta">
                <span class="pipeline-level-badge" id="pipelineLevelBadge"></span>
                <span class="pipeline-track-badge" id="pipelineTrackBadge"></span>
                <span class="pipeline-duration" id="pipelineDuration"></span>
            </div>
            <button class="pipeline-modal-close" id="pipelineModalClose" aria-label="Close modal">&times;</button>
        </div>
        <h2 class="pipeline-modal-title" id="pipelineModalTitle"></h2>
        <p class="pipeline-modal-description" id="pipelineModalDescription"></p>
        <div class="pipeline-steps" id="pipelineSteps">
            <!-- Populated by JavaScript -->
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='training.js') }}"></script>
{% endblock %}
